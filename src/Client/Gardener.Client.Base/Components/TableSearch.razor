@using AntDesign.Select
@typeparam TDto
<Row Style="margin-bottom:10px;">
	<AntDesign.Col Span="4">
		<Select Mode="multiple"
        Placeholder="@localizer["请选择过滤字段"]"
		@bind-Values="@_selectedValues"
		TItemValue="string"
		TItem="string"
		OnSelectedItemsChanged="OnSelectedItemsChangedHandler"
		MaxTagCount="@ResponsiveTag.Responsive"
		AllowClear
		>
		<SelectOptions>
			@foreach(TableSearchField item in _fields)
			{
				<SelectOption TItemValue="string" TItem="string" Value="@item.Name" Label="@item.DisplayName" />
			}
		</SelectOptions>
		</Select>
	</AntDesign.Col>
	<AntDesign.Col Span="18">
		@if(_selectedValues!=null && _selectedValues.Count()>0)
		{
			string width = Math.Ceiling((decimal)100/_fields.Count())+"%";
			string style=$"margin-left:5px;margin-bottom:2px;width:{width}";
			string begin=localizer["开始"];
			string end=localizer["结束"];
			foreach (string field in _selectedValues)
			{ 
				 TableSearchField fieldInfo= _fields.Where(x=>x.Name.Equals(field)).FirstOrDefault();
				string placeholder=fieldInfo.DisplayName;
				if (fieldInfo.Type.Equals(typeof(string)))
				{ 
					<Input Style="@style" Type="text" Placeholder="@placeholder" TValue="string" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(Guid)))
				{ 
					<Input Style="@style" Type="text" Placeholder="@placeholder" TValue="Guid?" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(int)))
				{ 
					<Input Style="@style" Type="number" Placeholder="@placeholder" TValue="int?" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(short)))
				{ 
					<Input Style="@style" Type="number" Placeholder="@placeholder" TValue="short?" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(long)))
				{ 
					<Input Style="@style" Type="number" Placeholder="@placeholder" TValue="long?" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(decimal)))
				{ 
					<Input Style="@style" Type="number" Placeholder="@placeholder" TValue="decimal?" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(double)))
				{ 
					<Input Style="@style" Type="number" Placeholder="@placeholder" TValue="double?" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(DateTimeOffset)))
				{ 
					<RangePicker Style="margin-left:5px;" TValue="DateTime?[]" ShowTime="@true" Placeholder="new []{fieldInfo.DisplayName+begin,fieldInfo.DisplayName+end}" />
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(DateTime)))
				{ 
					<RangePicker Style="margin-left:5px;" TValue="DateTime?[]" ShowTime="@true" Placeholder="new []{fieldInfo.DisplayName+begin,fieldInfo.DisplayName+end}"/>
				}else if (fieldInfo.Type.GetNonNullableType().Equals(typeof(bool)))
				{ 
					<Select 
						Mode="multiple"
						Placeholder="@placeholder"
						TItemValue="bool"
						TItem="string"
						Style="margin-left:5px;margin-bottom:2px;width:110px;"
						MaxTagCount="2"
						AllowClear>
					<SelectOptions>
						<SelectOption TItemValue="bool" TItem="string" Value="true" Label="@localizer["是"]" />
						<SelectOption TItemValue="bool" TItem="string" Value="false" Label="@localizer["否"]" />
					</SelectOptions>
					</Select>
				}
			}
		}
    </AntDesign.Col>
	<AntDesign.Col Span="2" Style="text-align:right">
		@if (_selectedValues != null && _selectedValues.Count() > 0)
		{
			<ResourceAuthorize ResourceKey="user_center_role_refresh">
				<Button Icon="search" Shape="@ButtonShape.Round">
					@localizer["搜索"]
				</Button>
			</ResourceAuthorize>
		}
	</AntDesign.Col>
</Row>

